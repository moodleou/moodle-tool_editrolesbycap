YUI.add("moodle-tool_editrolesbycap-capabilityformfield",function(i,t){var e=function(){e.superclass.constructor.apply(this,arguments)};i.extend(e,i.Base,{initializer:function(){}},{NAME:"capabilityformfield",ATTRS:{}}),M.tool_editrolesbycap=M.tool_editrolesbycap||{},M.tool_editrolesbycap.init_capabilityformfield=function(t){this.select=i.one(t),this.select&&(t=this.get_filter_cookie(),this.div=i.Node.create('<div class="capabilitysearchui form-inline m-t-1"></div>').setStyles({width:this.select.get("offsetWidth"),marginLeft:"auto",marginRight:"auto"}),this.input=i.Node.create('<input type="text" id="'+this.select.get("id")+'capabilitysearch" class="form-control" value="'+t+'" />'),this.label=i.Node.create('<label for="'+this.input.get("id")+'">'+M.util.get_string("filter","moodle")+" </label>"),this.button=i.Node.create('<input type="button" class="btn btn-secondary" value="'+M.util.get_string("clear","moodle")+'" />').set("disabled",""===t),this.div.append(this.label).append(this.input).append(this.button),this.select.ancestor().append(this.div),this.nonemessage=i.Node.create('<optgroup label="'+M.util.get_string("nonematch","tool_editrolesbycap")+'"></optgroup>'),this.select.append(this.nonemessage),this.set_visible(this.nonemessage,!1),this.input.on("keyup",this.change,this),this.button.on("click",this.clear,this),""!==t&&this.filter(),e({}))},M.tool_editrolesbycap.set_filter_cookie=function(t){t={flttime:(new Date).getTime(),fltvalue:t};i.Cookie.setSubs("captblflt",t)},M.tool_editrolesbycap.get_filter_cookie=function(){var t=i.Cookie.getSubs("captblflt");return null!==t&&parseInt(t.flttime,10)>(new Date).getTime()-36e5?t.fltvalue:""},M.tool_editrolesbycap.clear=function(){this.input.set("value",""),-1!==this.delayhandle&&(clearTimeout(this.delayhandle),this.delayhandle=-1),this.filter()},M.tool_editrolesbycap.change=function(){var t=this,e=setTimeout(function(){t.filter()},this.searchdelay);-1!==this.delayhandle&&clearTimeout(this.delayhandle),this.delayhandle=e},M.tool_editrolesbycap.set_visible=function(t,e){i.one("body.ie")||i.one("body.safari")?e?t.get("parentNode").test("span")&&t.unwrap():t.get("parentNode").test("span")||t.wrap('<span style="display: none;"/>'):e?t.setStyle("display","block"):t.setStyle("display","none")},M.tool_editrolesbycap.filter=function(){var i,s=this.input.get("value").toLowerCase();this.set_filter_cookie(s),this.button.set("disabled",""===s),i=!0,this.select.all("optgroup").each(function(t){this.set_visible(t,!1);var e=t;t.all("option").each(function(t){0<=t.get("text").toLowerCase().indexOf(s)?(this.set_visible(e,!0),this.set_visible(t,!0),i=!1):this.set_visible(t,!1)},this)},this),i&&this.set_visible(this.nonemessage,!0)}},"@VERSION@",{requires:["base","dom","event","cookie"]});